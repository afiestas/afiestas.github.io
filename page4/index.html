<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Àlex Fiestas's blog</title>
  <meta name="description" content="Playground for hacking">
  
  <meta name="author" content="Àlex Fiestas's blog">
  <meta name="copyright" content="&copy; Àlex Fiestas's blog 2022">
  

  <!-- External libraries -->
  <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.5/styles/monokai_sublime.min.css">
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/lightbox2/2.7.1/css/lightbox.css">

  <!-- Favicon and other icons (made with http://www.favicon-generator.org/) -->
  <!--<link rel="shortcut icon" href="/assets/icons/favicon.ico" type="image/x-icon">
	<link rel="icon" href="/assets/icons/favicon.ico" type="image/x-icon">
  <link rel="apple-touch-icon" sizes="57x57" href="/assets/icons/apple-icon-57x57.png">
	<link rel="apple-touch-icon" sizes="60x60" href="/assets/icons/apple-icon-60x60.png">
	<link rel="apple-touch-icon" sizes="72x72" href="/assets/icons/apple-icon-72x72.png">
	<link rel="apple-touch-icon" sizes="76x76" href="/assets/icons/apple-icon-76x76.png">
	<link rel="apple-touch-icon" sizes="114x114" href="/assets/icons/apple-icon-114x114.png">
	<link rel="apple-touch-icon" sizes="120x120" href="/assets/icons/apple-icon-120x120.png">
	<link rel="apple-touch-icon" sizes="144x144" href="/assets/icons/apple-icon-144x144.png">
	<link rel="apple-touch-icon" sizes="152x152" href="/assets/icons/apple-icon-152x152.png">
	<link rel="apple-touch-icon" sizes="180x180" href="/assets/icons/apple-icon-180x180.png">
	<link rel="icon" type="image/png" sizes="192x192"  href="/assets/icons/android-icon-192x192.png">
	<link rel="icon" type="image/png" sizes="32x32" href="/assets/icons/favicon-32x32.png">
	<link rel="icon" type="image/png" sizes="96x96" href="/assets/icons/favicon-96x96.png">
	<link rel="icon" type="image/png" sizes="16x16" href="/assets/icons/favicon-16x16.png">-->
<!-- 	<link rel="manifest" href="/assets/icons/manifest.json"> -->
<!-- 	<meta name="msapplication-TileColor" content="#ffffff"> -->
<!-- 	<meta name="msapplication-TileImage" content="/assets/icons/ms-icon-144x144.png"> -->
	<meta name="theme-color" content="#ffffff">

	<!-- Facebook OGP cards -->
  <meta property="og:description" content="Playground for hacking" />
  <meta property="og:url" content="http://afiestas.org" />
  <meta property="og:site_name" content="Àlex Fiestas's blog" />
  <meta property="og:title" content="Àlex Fiestas's blog" />
  <meta property="og:type" content="website" />
  <meta property="og:image" content="http://afiestas.org/" />
  <meta property="og:image:type" content="" />
  <meta property="og:image:width" content="" />
  <meta property="og:image:height" content="" />

  <!-- Twitter: card tags -->
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Àlex Fiestas's blog">
  <meta name="twitter:description" content="Playground for hacking">
  <meta name="twitter:image" content="http://afiestas.org/">
  <meta name="twitter:url" content="http://afiestas.org">

  

	<!-- Site styles -->
  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="http://afiestas.org//page4/">
  <link rel="alternate" type="application/rss+xml" title="Àlex Fiestas's blog" href="http://afiestas.org//feed.xml" />
</head>


  <body>
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-51319654-1', 'auto');
  ga('send', 'pageview');

</script>

    <header class="navigation" role="banner">
  
</header>


    <div class="page-content">
        <div class="home">

<div class="site-header-container has-cover" style="background-image: url(/assets/header_image2.jpg);">
	<div class="scrim has-cover">
		<header class="site-header">
		  <h1 class="title">Àlex Fiestas's blog</h1>
		  <p class="subtitle">Hacking: Playful cleverness</p>
		</header>
	</div>
</div>

<div class="wrapper"">
<ul class="post-list">
  
  <li>
    <h2>
      <a class="post-link" href="/bluedevil-1-3-released/">BlueDevil 1.3 released</a>
    </h2>
    <section class="post-excerpt" itemprop="description">
      <p><p>Belated release announcement of the last and most stable BlueDevil release:</p>
<p>List of unique changes in 1.3 final:</p>
<ul>
<li><span style="line-height: 13px;">308324: Fixes crash in obexftp KDED module<br />
</span></li>
<li>304785: Fixes crash in obexftp KDED module (yes, another)</li>
<li>311152: Fixes crash in network-dun plugin when no adapter is present</li>
<li>KDED crashes</li>
<li>Do not show PANU in kiobluetooth since it is not supported</li>
<li>Use common version number in all components (correct version reporting)</li>
</ul>
<p>As always you can download it from:</p>
<p>http://download.kde.org/stable/bluedevil/1.3/src/bluedevil-1.3.tar.bz2<br />
md5: 3a90e8826eb9f464084bbdafa549bf3e<br />
sha256: 6dd3cca20da3ab89af1514717b969cf6d549ead4cd4f3b1f7b23ffe7e5d282e3</p>
<p>Hope you enjoy it !</p>
</p>
    </section>
    <section class="post-meta">
    	<div class="post-date">February 10, 2013</div>
    	<div class="post-categories">
    	in 
    	  
    	  <span>Kde</span>, 
    	  
    	
    	  
    	  <span>Software libre</span>
    	  
    	
    	</div>
    </section>
  </li>
  
  <hr>
  
  
  <li>
    <h2>
      <a class="post-link" href="/kscreen-0-1-alpha-released/">KScreen 0.1-alpha released !</a>
    </h2>
    <section class="post-excerpt" itemprop="description">
      <p><p>We are really glad to announce the first release of KScreen, the new way of managing screens in Plasma Desktop !</p>
<p>This release comes with two main components, the System Settings module which will let you configure and arrange your screens in any way you desire, and the KDED module which will remember and restore configurations whenever it is needed.</p>
<p>We have decided to release now since we have fixed pretty much all the bugs reported by our early adopters (special thanks and hugs to them) so we feel that it is about time we let power users test it so we can fix any bug that may still exists.</p>
<p>The System Settings module:<br />
<iframe src="http://player.vimeo.com/video/58253613" height="338" width="600" allowfullscreen="" frameborder="0"></iframe></p>
<p><a href="http://vimeo.com/58253613">KScreen System Settings module</a> from <a href="http://vimeo.com/user13559274">Àlex Fiestas</a> on <a href="http://vimeo.com">Vimeo</a>.</p>
<p>&nbsp;</p>
<p>The KDED (magic) Module:<br />
<iframe src="http://player.vimeo.com/video/56296943" height="338" width="600" allowfullscreen="" frameborder="0"></iframe></p>
<p><a href="http://vimeo.com/56296943">New KDE Screen Management</a> from <a href="http://vimeo.com/user13559274">Àlex Fiestas</a> on <a href="http://vimeo.com">Vimeo</a>.</p>
<p>You can download tarballs from:</p>
<p><!--StartFragment-->http://download.kde.org/unstable/kscreen/0.0.71/src/kscreen-0.0.71.tar.bz2</p>
<p>http://download.kde.org/unstable/libkscreen/0.0.71/src/libkscreen-0.0.71.tar.bz2</p>
<p>We asked packagers to fill <a title="How to install kscreen" href="http://community.kde.org/Solid/Projects/ScreenManagement/Install" target="_blank">this wiki page</a> with instructions of how to install KScreen in their distributions, so far only Kubuntu and Arch did it :/ so ask your distribution to create packages for it !</p>
</p>
    </section>
    <section class="post-meta">
    	<div class="post-date">January 26, 2013</div>
    	<div class="post-categories">
    	in 
    	  
    	  <span>Kde</span>, 
    	  
    	
    	  
    	  <span>Software libre</span>
    	  
    	
    	</div>
    </section>
  </li>
  
  <hr>
  
  
  <li>
    <h2>
      <a class="post-link" href="/screen-management-got-magic/">Screen management got magic</a>
    </h2>
    <section class="post-excerpt" itemprop="description">
      <p><p>As you may know <a href="http://www.progdan.cz/" target="_blank">Dan Vrátil</a> and I are working in a brand new <a href="http://www.progdan.cz/2012/09/display-management-in-kde/" target="_blank">screen manager </a>that will solve most of the issues that we currently have on the desktop, making the configuration of monitors either auto-magical or super simple.</p>
<p>We are trying be as smart as possible adapting the behavior of it to each use case making the configuration of monitors as simple as plugging them to your computer.</p>
<p>A video is worth more than a million words:</p>
<p><iframe src="http://player.vimeo.com/video/56296943" width="600" height="338" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>
<p><a href="http://vimeo.com/56296943">New KDE Screen Management</a> from <a href="http://vimeo.com/user13559274">&Agrave;lex Fiestas</a> on <a href="http://vimeo.com">Vimeo</a>.</p>
<p>The behaviors are still not finished and we may change our defaults based on feedback and field test, but eh! it is a start :p</p>
<p>I'd like to personally thanks Red Hat for sponsoring Dan and my employer BlueSystems for letting me squeeze some time to move this forward.</p>
<p><img class="alignnone" alt="" src="http://WWW.afiestas.org/wp-content/uploads/2012/12/redhat-logo.jpg" width="300" height="96" /><img class=" alignleft" alt="" src="http://cdn.afiestas.org/files/blue-systems-logo300.png" width="300" height="113" /></p>
<p>Finally if you want to get this working:</p>
<ol>
<li>Compile libkscreen</li>
<li>Compile kscreen</li>
<li>qdbus org.kde.kded /kded org.kde.kded.unloadModule randrmonitor</li>
<li>qdbus org.kde.kded /kded org.kde.kded.setModuleAutoloading randrmonitor false</li>
<li>qdbus org.kde.kded /kded org.kde.kded.loadModule kscreen</li>
</ol>
<p>Enjoy !</p>
</p>
    </section>
    <section class="post-meta">
    	<div class="post-date">December 26, 2012</div>
    	<div class="post-categories">
    	in 
    	  
    	  <span>Kde</span>, 
    	  
    	
    	  
    	  <span>Software libre</span>
    	  
    	
    	</div>
    </section>
  </li>
  
  <hr>
  
  
  <li>
    <h2>
      <a class="post-link" href="/giveaways-in-the-next-kde-teatime-10/">Giveaways in the next KDE TeaTime (#10)</a>
    </h2>
    <section class="post-excerpt" itemprop="description">
      <p><p>Almost a month has passed since I wrote on this blog about the show, and so far everything is going great, people seem to be enjoying it and we are having a ton of fun doing it.</p>
<p>Since I talked about it we have done 2 more shows:</p>
<p><strong>KDE TeaTime #8 - If you could change one default setting, what would it be?<br />
</strong><a href="http://www.youtube.com/watch?v=wgv0etfJdNE">http://www.youtube.com/watch?v=wgv0etfJdNE</a></p>
<p><strong>KDE TeaTime #9 - When to release?<br />
</strong><a href="http://www.youtube.com/watch?v=8-pcPeUsznE">http://www.youtube.com/watch?v=8-pcPeUsznE</a></p>
<p>And for the next one in order to properly celebrate the #10 show we have prepared some giveaways !</p>
<p><iframe src="http://www.youtube.com/embed/capraS_xE-8" frameborder="0" width="640" height="380"></iframe></p>
<p>During the show we will explain how to participate in the raffle so make sure to not miss it!</p>
<p><a href="http://afiestas.org/wp-content/uploads/2012/12/konqui.jpg"><img class="alignnone" title="Konqui giveaway" src="http://afiestas.org/wp-content/uploads/2012/12/konqui_small.jpg" alt="" width="640" height="479" /></a></p>
<p>Cheerz!</p>
</p>
    </section>
    <section class="post-meta">
    	<div class="post-date">December 6, 2012</div>
    	<div class="post-categories">
    	in 
    	  
    	  <span>Kde</span>, 
    	  
    	
    	  
    	  <span>Software libre</span>
    	  
    	
    	</div>
    </section>
  </li>
  
  <hr>
  
  
  <li>
    <h2>
      <a class="post-link" href="/kdepim-sprint-2-understanding-and-diagnosing-akonadi/">KDEPIM sprint #2 (Understanding and diagnosing Akonadi)</a>
    </h2>
    <section class="post-excerpt" itemprop="description">
      <p><p>In this second part I'm going to explain a few techniques to debug Akonadi we use in order to understand why my KMail installation was working bad.</p>
<p><strong>My configuration<br />
</strong>I'm a heavy email user, every day  I receive and read hundreds of them, and I love to have my email synchronized across devices (laptop, workstation, phone, tablet) and particulary in my laptop and workstation I want to have all my email <em>offline</em> so I can make use of it with or without internet, specially useful on my laptop while traveling. Because of all those reasons I have to use something called Disconnect IMAP.</p>
<p><strong>My EMail account<br />
</strong>The account has 5.6GB of data and according to GMail it is split in 700K emails (more or less) 200K of those emails are in a folder (label in GMail) called kde-commits with a size of 1.8GB, then it has 5 folders with more than 25K emails and around 200MB of data each, and finally the rest are just small folders with 500-5000 emails. In total there are 70 folders.</p>
<p><strong>First import experience<br />
</strong>The first problem I have with KMail2 is the experience out of the first email import. Since my account is so huge it takes a while (around 15 hours) to make the full import and I can't use the application while doing it because either the data won't be available or all my CPU power will be used in the task.</p>
<p>To fix this we designed something called "Spanish sync" which basically consist on splitting the task of "Downloading all email while indexing it" into the following steps:</p>
<ol>
<li>Download all the envelopes (subject,from, to, and some other data) starting from the most recent. Once this is done KMail will be fully functional (full email will be downloaded when user tries to read it).</li>
<li>Download in a controlled way all the email bodies (where the content of the email is). Right now this goes as fast as your internet line allows which can be a problem for people having a fast internet connection (100Mb in my case) and slow machine (my laptop is 6yrs old). Once this finishes the email content will be available offline.</li>
<li>Finally we will index all emails. If the user tries to search before this is done we will show an progress indicator.</li>
</ol>
<p>The full synchronization of my email is still going to take 15 hours but I will be able to use my application almost since moment one (since it will import most recent emails first).</p>
<p><strong>KMail not showing email body</strong><br />
Even though I set my account as "Disconnected IMAP", more or less 50% of my emails were not being downloaded so I kept getting this "loading email" message from KMail. This is specially annoying when I'm on my laptop since the internet availability while traveling is not reliable. We have not been able to identify the reason why 1 out 2 emails is not being downloaded but at least I learned how to diagnose this.</p>
<p>Execute the debugging application "akonadiconsole" and go to the "DB console" tab and execute the following SQL query:</p>
<p><!--StartFragment-->SELECT count(*) FROM parttable WHERE name = "PLD:RFC822" AND data is null;</p>
<p><img class="aligncenter" title="Change notification log" src="http://cdn.afiestas.org/wp-content/uploads/2012/11/change-notification.png" alt="" width="399" height="622" /></p>
<p><!--EndFragment--></p>
<p>The result should be a small amount of your total email (in my workstation it is 4K while in my laptop it is 300K). If you set your account as "Disconnected IMAP" and you are getting a high number you may be suffering the same bug.</p>
<p>Unfortunately there is no way to force Akonadi to download the missing body for all those emails... so you will have to either live with it or re-import your account.</p>
<p><strong>KMail not updating email status, not loading anything, not working</strong> !<br />
If all your email is offline and you do not suffer from the bug I mentioned before, you won't even notice this... but if you are using "Normal IMAP" or you suffer the bug this is the most annoying behavior.</p>
<p>Basically all the actions you perform are put in a queue to be processed, for example if you read 100 emails while offline, those "100 read actions" will be stored locally and pushed to the server once online. Where is the problem? the problem is that right now "pushing" this information blocks any other operation to be sure that we are using fresh data so if for instance email XXX is requested akonadi won't provide it until the the "pushing" finishes.</p>
<p>In most IMAP servers pushing this data is FAST, but for some reason in GMail each modification takes around 1/2 seconds... so if I set as read 100 email or I delete 2000 make the math :p</p>
<p>The solution for this is conceptually quite easy, we should only block operations that affect email XXX instead of blocking everything. The technical implementation is a little more difficult than that :p</p>
<p>You can use akonadiconsole to check this "todo list", open it go to "Agents" tab, and in there open the context menu on the agent you want to check and click on "show change-notification log".</p>
<p><a href="http://cdn.afiestas.org/wp-content/uploads/2012/11/emails-without-payload.png"><img class="alignnone" title="Email without payload sql query" src="http://cdn.afiestas.org/wp-content/uploads/2012/11/emails-without-payload-small.png" alt="" width="640" height="371" /></a></p>
<p><strong>Summary:</strong><br />
Akonadi and Kontact2 are an awesome piece of software, I have no doubts that once the issues I mentioned here are fixed we will offer a better user experience than the one you get either in osx or Thunderbird.</p>
<p>As a note, Thunderbird or iMail take also 15 hour to fetch all my email, with the difference that I can use my email right the way, we are not that far.</p>
<p>Finally, a screenshot of how I'd like KMail to look like by default... and I'm not the only one asking this :p</p>
<p><a href="http://cdn.afiestas.org/wp-content/uploads/2012/11/kmail.png"><img class="alignnone" title="KMail awesome config" src="http://cdn.afiestas.org/wp-content/uploads/2012/11/kmail-small.png" alt="" width="640" height="391" /></a></p>
<p>Edit: to have this config just do:</p>
<p>Settings--&gt;Appearance--&gt;Layout--&gt;Show the message preview pane next to the message list<br />
Settings-&gt;Appearance--&gt;Message List--&gt;Default Thene: Fancy with Clickable Status</p>
</p>
    </section>
    <section class="post-meta">
    	<div class="post-date">November 28, 2012</div>
    	<div class="post-categories">
    	in 
    	  
    	  <span>Kde</span>, 
    	  
    	
    	  
    	  <span>Software libre</span>
    	  
    	
    	</div>
    </section>
  </li>
  
  
</ul>

<nav class="pagination" role="navigation">
	<p>
    
    <a class="newer-posts" href="/page5">
	    <span class="fa-stack fa-lg">
			  <i class="fa fa-square fa-stack-2x"></i>
			  <i class="fa fa-angle-double-left fa-stack-1x fa-inverse"></i>
			</span>
		</a>
    
    <span class="page-number">Page 4 of 22</span>
    
      
      <a class="newer-posts" href="/page3">
		    <span class="fa-stack fa-lg">
				  <i class="fa fa-square fa-stack-2x"></i>
				  <i class="fa fa-angle-double-right fa-stack-1x fa-inverse"></i>
				</span>
			</a>
      
    
  </p>
  <p>
    <a href="/posts">View All Posts by Category</a>
  </p>
</nav>

</div>
</div>

    </div>

    <footer class="site-footer">

  <div class="wrapper">

    <h3 class="footer-heading">Àlex Fiestas's blog</h3>

    <div class="site-navigation">
    	
    	<p><strong>Site Map</strong></p>
      <ul class="pages">
        
        
        
        
        
        
        
        
          <li class="nav-link"><a href="/posts/">Posts</a>
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
      </ul>
    </div>

    <div class="site-contact">

    	<p><strong>Contact</strong></p>
      <ul class="social-media-list">
      	<li>
      		<a href="mailto:afiestaso@gmail.com">
	      		<i class="fa fa-envelope-o"></i>
	      		<span class="username">afiestaso@gmail.com</span>
      		</a>
      	</li>

      	

      </ul>
    </div>

    <div class="site-signature">
    	<p class="rss-subscribe text"><strong>Subscribe <a href="/feed.xml">via RSS</a></strong></p>
      <p class="text">Playground for hacking</p>
    </div>

  </div>

</footer>

<!-- Scripts -->
<script src="//code.jquery.com/jquery-1.11.2.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.5/highlight.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/lightbox2/2.7.1/js/lightbox.min.js"></script>
<script>

$(document).ready(function() {

	// Syntax highlighting
	hljs.initHighlightingOnLoad();

	// Header
  var menuToggle = $('#js-mobile-menu').unbind();
  $('#js-navigation-menu').removeClass("show");
  menuToggle.on('click', function(e) {
    e.preventDefault();
    $('#js-navigation-menu').slideToggle(function(){
      if($('#js-navigation-menu').is(':hidden')) {
        $('#js-navigation-menu').removeAttr('style');
      }
    });
  });


});

</script>




  </body>

</html>
